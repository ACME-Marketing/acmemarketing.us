---
interface Props {
	title: string;
}

const { title } = Astro.props;
---

<!doctype html>
<html lang="en">
	<head>
		<meta charset="UTF-8" />
		<meta name="description" content="Astro description" />
		<meta name="viewport" content="width=device-width" />
		<link rel="icon" type="image/svg+xml" href="/favicon.svg" />
		<meta name="generator" content={Astro.generator} />
		<title>{title}</title>
		
	</head>
	<body>
		<header class="bg-blue-800 text-white py-4 shadow-md">
			<div class="container mx-auto flex flex-col md:flex-row justify-between items-center px-4">
				<h1 class="text-3xl font-extrabold mb-2 md:mb-0"><a href="/" class="hover:text-red-400">ACME Marketing</a></h1>
				<nav>
					<ul class="flex flex-wrap justify-center space-x-4 text-lg">
						<li><a href="/" class="hover:text-red-400 transition duration-300">Home</a></li>
						<li><a href="#" class="hover:text-red-400 transition duration-300">Services</a></li>
						<li><a href="/posts" class="hover:text-red-400 transition duration-300">Blog</a></li>
						<li><a href="#" class="hover:text-red-400 transition duration-300">Contact</a></li>
					</ul>
				</nav>
			</div>
		</header>
		<slot />

		<!-- Popup Form Modal -->
		<div id="lead-form-modal" class="fixed inset-0 bg-sky-200 bg-opacity-90 flex items-center justify-center z-50 hidden">
			<div class="bg-sky-100 p-8 rounded-lg shadow-xl max-w-lg w-full relative">
				<button id="close-modal" class="absolute top-4 right-4 text-gray-500 hover:text-gray-800 text-2xl font-bold">&times;</button>
				<h2 class="text-3xl font-bold mb-6 text-center text-gray-800">Download Your Ebook</h2>
				<form id="ebook-form" class="grid grid-cols-1 gap-4">
					<input type="hidden" id="page-of-click" name="page_of_click">
					<div>
						<label for="first-name" class="block text-gray-700 text-sm font-bold mb-2">First Name:</label>
						<input type="text" id="first-name" name="first_name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
					</div>
					<div>
						<label for="last-name" class="block text-gray-700 text-sm font-bold mb-2">Last Name:</label>
						<input type="text" id="last-name" name="last_name" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
					</div>
					<div>
						<label for="email" class="block text-gray-700 text-sm font-bold mb-2">Email:</label>
						<input type="email" id="email" name="email" class="shadow appearance-none border rounded w-full py-2 px-3 text-gray-700 leading-tight focus:outline-none focus:shadow-outline" required>
					</div>
					<div class="col-span-1 text-center">
						<button type="submit" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-4 rounded-full focus:outline-none focus:shadow-outline transition duration-300">Download Ebook</button>
					</div>
				</form>
			</div>
		</div>

	<footer class="bg-gray-800 text-white py-8 mt-12">
			<div class="container mx-auto px-4 text-center">
				<div class="flex flex-col md:flex-row justify-center items-center space-y-4 md:space-y-0 md:space-x-8 mb-4">
					<a href="/about" class="hover:underline">About</a>
					<a href="/privacy" class="hover:underline">Privacy</a>
				</div>
				<p class="text-sm mb-2">123 Marketing Lane, Suite 456, Anytown, USA 12345</p>
				<p class="text-sm mb-2">Email: info@acmemarketing.us</p>
				<p class="text-sm">&copy; {new Date().getFullYear()} ACME Marketing. All rights reserved.</p>
			</div>
		</footer>
	<script>
			// Force a re-render to bust cache
			console.log("BaseLayout script loaded.");
			const ctaButton = document.getElementById('open-ebook-modal');
			const modal = document.getElementById('lead-form-modal');
			const closeModalButton = document.getElementById('close-modal');
			const pageOfClickInput = document.getElementById('page-of-click');

			// Function to show the modal
			function showModal() {
				modal.classList.remove('hidden');
				modal.classList.add('flex');
				document.body.style.overflow = 'hidden'; // Prevent scrolling
				pageOfClickInput.value = window.location.href; // Set page of click
			}

			// Function to hide the modal
			function hideModal() {
				modal.classList.add('hidden');
				modal.classList.remove('flex');
				document.body.style.overflow = ''; // Restore scrolling
			}

			// Event listener for CTA button click
			if (ctaButton) {
				ctaButton.addEventListener('click', (e) => {
					e.preventDefault(); // Prevent default link behavior
					showModal();
				});
			}

			// Event listener for close button click
			closeModalButton.addEventListener('click', hideModal);

			// Event listener for clicking outside the modal (overlay)
			modal.addEventListener('click', (e) => {
				if (e.target === modal) {
					hideModal();
				}
			});
		</script>
	</body>
</html>
